{% style %}
  #shopify-section-{{ section.id }} .site-footer {
    --ft-bg:           {{ section.settings.background_color }};
    --ft-border:       {{ section.settings.top_border_color }};
    --ft-logo1:        {{ section.settings.logo_color_1 }};
    --ft-logo2:        {{ section.settings.logo_color_2 }};
    --ft-tagline:      {{ section.settings.tagline_color }};
    --ft-col-title:    {{ section.settings.column_title_color }};
    --ft-link:         {{ section.settings.link_color }};
    --ft-bottom-text:  {{ section.settings.bottom_text_color }};
  }
{% endstyle %}

<footer class="site-footer full-width" role="contentinfo">
  <div class="site-footer__main">

    {%- comment -%} Column 1: Brand {%- endcomment -%}
    <div class="site-footer__brand">
      <a href="{{ routes.root_url }}" class="site-footer__logo" aria-label="{{ shop.name }}">
        <span class="ft-logo-1">{{ section.settings.logo_text_1 }}</span>
        <span class="ft-logo-2">{{ section.settings.logo_text_2 }}</span>
      </a>
      {%- if section.settings.tagline != blank -%}
        <p class="site-footer__tagline">{{ section.settings.tagline }}</p>
      {%- endif -%}
      {%- if section.settings.show_payment_icons -%}
        <div class="site-footer__payment" aria-label="Accepted payment methods">
          {%- for type in shop.enabled_payment_types -%}
            {{ type | payment_type_svg_tag: class: 'payment-icon' }}
          {%- endfor -%}
        </div>
      {%- endif -%}
    </div>

    {%- comment -%} Columns 2–4: Link menus {%- endcomment -%}
    {%- assign col_indices = '1,2,3' | split: ',' -%}
    {%- for i in col_indices -%}
      {%- assign title_key = 'col' | append: i | append: '_title' -%}
      {%- assign menu_key  = 'col' | append: i | append: '_menu'  -%}
      {%- assign col_title = section.settings[title_key] -%}
      {%- assign col_menu  = section.settings[menu_key]  -%}

      <div class="site-footer__col">
        {%- if col_title != blank -%}
          <h3 class="site-footer__col-title">{{ col_title }}</h3>
        {%- endif -%}
        {%- if col_menu.links.size > 0 -%}
          <ul class="site-footer__links" role="list">
            {%- for link in col_menu.links -%}
              <li>
                <a href="{{ link.url }}" class="site-footer__link">{{ link.title }}</a>
              </li>
            {%- endfor -%}
          </ul>
        {%- endif -%}
      </div>
    {%- endfor -%}

  </div>

  <div class="site-footer__bottom">
    <p class="site-footer__copy">
      &copy; {{ 'now' | date: '%Y' }}
      <a href="{{ routes.root_url }}">{{ shop.name }}</a>.
      {{ section.settings.copyright_suffix }}
    </p>
    {%- if section.settings.footer_tagline != blank -%}
      <p class="site-footer__motto">{{ section.settings.footer_tagline }}</p>
    {%- endif -%}
  </div>
</footer>

{% stylesheet %}
  .site-footer {
    background-color: var(--ft-bg, #111009);
    border-top: 1px solid var(--ft-border, rgba(200, 169, 110, 0.25));
    padding: 72px var(--page-margin) 0;
  }

  .site-footer__main {
    display: grid;
    grid-template-columns: 1.6fr 1fr 1fr 1fr;
    gap: 48px;
    max-width: var(--page-width);
    margin: 0 auto;
    padding-bottom: 56px;
    border-bottom: 1px solid rgba(200, 169, 110, 0.12);
  }

  /* Brand column */
  .site-footer__logo {
    display: inline-flex;
    align-items: baseline;
    gap: 0;
    text-decoration: none;
    font-family: var(--font-heading);
    font-size: 26px;
    letter-spacing: 3px;
    margin-bottom: 14px;
  }

  .ft-logo-1 { color: var(--ft-logo1, #c8a96e); }
  .ft-logo-2 { color: var(--ft-logo2, #faf8f4); }

  .site-footer__tagline {
    font-family: var(--font-body);
    font-size: 14px;
    font-weight: 300;
    color: var(--ft-tagline, rgba(232, 213, 176, 0.6));
    line-height: 1.6;
    max-width: 280px;
    margin-bottom: 24px;
  }

  .site-footer__payment {
    display: flex;
    flex-wrap: wrap;
    gap: 8px;
    margin-top: 8px;
  }

  .payment-icon {
    height: 24px;
    width: auto;
    opacity: 0.6;
    filter: grayscale(1) brightness(2);
  }

  /* Link columns */
  .site-footer__col-title {
    font-family: var(--font-label);
    font-size: 11px;
    font-weight: 700;
    letter-spacing: 4px;
    text-transform: uppercase;
    color: var(--ft-col-title, #c8a96e);
    margin-bottom: 20px;
  }

  .site-footer__links {
    list-style: none;
    padding: 0;
    display: flex;
    flex-direction: column;
    gap: 10px;
  }

  .site-footer__link {
    font-family: var(--font-body);
    font-size: 13px;
    font-weight: 300;
    color: var(--ft-link, rgba(232, 213, 176, 0.65));
    text-decoration: none;
    transition: color 0.2s ease;
    line-height: 1.4;
  }

  .site-footer__link:hover {
    color: var(--color-tan);
  }

  /* Bottom bar */
  .site-footer__bottom {
    max-width: var(--page-width);
    margin: 0 auto;
    padding: 24px 0;
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 16px;
    flex-wrap: wrap;
  }

  .site-footer__copy {
    font-family: var(--font-label);
    font-size: 12px;
    letter-spacing: 1px;
    color: var(--ft-bottom-text, rgba(232, 213, 176, 0.4));
  }

  .site-footer__copy a {
    color: inherit;
    text-decoration: none;
  }

  .site-footer__motto {
    font-family: var(--font-label);
    font-size: 12px;
    letter-spacing: 2px;
    text-transform: uppercase;
    color: var(--ft-bottom-text, rgba(232, 213, 176, 0.4));
  }

  @media (max-width: 1024px) {
    .site-footer__main {
      grid-template-columns: 1fr 1fr;
      gap: 40px;
    }
  }

  @media (max-width: 768px) {
    .site-footer { padding-top: 56px; }

    .site-footer__main {
      grid-template-columns: 1fr;
      gap: 32px;
    }

    .site-footer__bottom {
      flex-direction: column;
      align-items: flex-start;
      gap: 8px;
    }
  }
{% endstylesheet %}

{% schema %}
{
  "name": "Footer",
  "settings": [
    {
      "type": "header",
      "content": "Brand column"
    },
    {
      "type": "text",
      "id": "logo_text_1",
      "label": "Logo — first word",
      "default": "RUCK"
    },
    {
      "type": "text",
      "id": "logo_text_2",
      "label": "Logo — second word",
      "default": "ON"
    },
    {
      "type": "textarea",
      "id": "tagline",
      "label": "Brand tagline",
      "default": "Tactical gear and apparel for those who never put the ruck down."
    },
    {
      "type": "checkbox",
      "id": "show_payment_icons",
      "label": "Show payment icons",
      "default": true
    },
    {
      "type": "header",
      "content": "Column 2 — Shop"
    },
    {
      "type": "text",
      "id": "col1_title",
      "label": "Column 2 title",
      "default": "Shop"
    },
    {
      "type": "link_list",
      "id": "col1_menu",
      "label": "Column 2 menu"
    },
    {
      "type": "header",
      "content": "Column 3 — Company"
    },
    {
      "type": "text",
      "id": "col2_title",
      "label": "Column 3 title",
      "default": "Company"
    },
    {
      "type": "link_list",
      "id": "col2_menu",
      "label": "Column 3 menu"
    },
    {
      "type": "header",
      "content": "Column 4 — Support"
    },
    {
      "type": "text",
      "id": "col3_title",
      "label": "Column 4 title",
      "default": "Support"
    },
    {
      "type": "link_list",
      "id": "col3_menu",
      "label": "Column 4 menu"
    },
    {
      "type": "header",
      "content": "Bottom bar"
    },
    {
      "type": "text",
      "id": "copyright_suffix",
      "label": "Copyright suffix",
      "default": "All rights reserved."
    },
    {
      "type": "text",
      "id": "footer_tagline",
      "label": "Footer tagline (right side)",
      "default": "Made for Ruckers. By Ruckers."
    },
    {
      "type": "header",
      "content": "Colors"
    },
    {
      "type": "color",
      "id": "background_color",
      "label": "Background",
      "default": "#111009"
    },
    {
      "type": "color",
      "id": "top_border_color",
      "label": "Top border",
      "default": "#c8a96e"
    },
    {
      "type": "color",
      "id": "logo_color_1",
      "label": "Logo word 1 color",
      "default": "#c8a96e"
    },
    {
      "type": "color",
      "id": "logo_color_2",
      "label": "Logo word 2 color",
      "default": "#faf8f4"
    },
    {
      "type": "color",
      "id": "tagline_color",
      "label": "Tagline text color",
      "default": "#e8d5b0"
    },
    {
      "type": "color",
      "id": "column_title_color",
      "label": "Column title color",
      "default": "#c8a96e"
    },
    {
      "type": "color",
      "id": "link_color",
      "label": "Link color",
      "default": "#e8d5b0"
    },
    {
      "type": "color",
      "id": "bottom_text_color",
      "label": "Bottom bar text color",
      "default": "#e8d5b0"
    }
  ]
}
{% endschema %}
