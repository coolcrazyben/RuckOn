<div class="pw-page">

  {%- comment -%} ━━━ 1. HERO ━━━ {%- endcomment -%}
  <section class="pw-hero" aria-labelledby="pw-headline">
    <div class="pw-hero__grid" aria-hidden="true"></div>
    <div class="pw-hero__overlay" aria-hidden="true"></div>

    <div class="pw-hero__content">
      <p class="pw-eyebrow">// {{ section.settings.eyebrow }}</p>

      <h1 id="pw-headline" class="pw-headline">
        {{ section.settings.heading }}
      </h1>

      <p class="pw-subheadline">
        {{ section.settings.subheading }}
      </p>
    </div>
  </section>

  {%- comment -%} ━━━ 2. EXPLAINER ━━━ {%- endcomment -%}
  <section class="pw-explainer" aria-label="What we're building">
    <div class="pw-explainer__inner">
      <ul class="pw-features" role="list">
        {%- if section.settings.feature_1 != blank -%}
          <li class="pw-feature">
            <span class="pw-feature__diamond" aria-hidden="true"></span>
            {{ section.settings.feature_1 }}
          </li>
        {%- endif -%}
        {%- if section.settings.feature_2 != blank -%}
          <li class="pw-feature">
            <span class="pw-feature__diamond" aria-hidden="true"></span>
            {{ section.settings.feature_2 }}
          </li>
        {%- endif -%}
        {%- if section.settings.feature_3 != blank -%}
          <li class="pw-feature">
            <span class="pw-feature__diamond" aria-hidden="true"></span>
            {{ section.settings.feature_3 }}
          </li>
        {%- endif -%}
      </ul>
    </div>
  </section>

  {%- comment -%} ━━━ 3. EMAIL CAPTURE ━━━ {%- endcomment -%}
  <section class="pw-capture" aria-label="Email sign-up">
    <div class="pw-capture__inner">

      {%- form 'customer', id: 'pw-email-form', class: 'pw-form' -%}

        {%- if form.posted_successfully? -%}
          <p class="pw-success" role="status" aria-live="polite">
            {{ section.settings.success_message }}
          </p>

        {%- else -%}
          <input type="hidden" name="contact[tags]" value="coming-soon,newsletter">
          {{ form.errors | default_errors }}

          <div class="pw-form__row">
            <label for="pw-email" class="visually-hidden">Email address</label>
            <input
              type="email"
              id="pw-email"
              name="contact[email]"
              class="pw-form__input"
              placeholder="{{ section.settings.input_placeholder }}"
              autocomplete="email"
              autocorrect="off"
              autocapitalize="off"
              required
              aria-required="true"
            >
            <button type="submit" class="pw-form__btn">
              {{ section.settings.button_text }}
            </button>
          </div>

          {%- if section.settings.form_note != blank -%}
            <p class="pw-form__note">{{ section.settings.form_note }}</p>
          {%- endif -%}

        {%- endif -%}

      {%- endform -%}

    </div>
  </section>

  {%- comment -%} ━━━ 4. STORE ACCESS (storefront password — required) ━━━ {%- endcomment -%}
  <section class="pw-access" aria-label="Store access">
    <button
      class="pw-access__toggle"
      type="button"
      aria-expanded="false"
      aria-controls="pw-access-form"
    >
      {{ section.settings.password_toggle_label }}
      <span class="pw-access__chevron" aria-hidden="true"></span>
    </button>

    <div id="pw-access-form" class="pw-access__form" hidden>
      {%- form 'storefront_password' -%}
        {%- if form.errors -%}
          <div class="pw-access__error">{{ form.errors | default_errors }}</div>
        {%- endif -%}

        <div class="pw-form__row">
          <label for="pw-password" class="visually-hidden">{{ section.settings.password_label }}</label>
          <input
            type="password"
            name="password"
            id="pw-password"
            class="pw-form__input"
            placeholder="{{ section.settings.password_placeholder }}"
            autocomplete="current-password"
          >
          <button type="submit" class="pw-form__btn">
            {{ section.settings.password_button }}
          </button>
        </div>
      {%- endform -%}
    </div>
  </section>

  {%- comment -%} ━━━ 5. BOTTOM LOGO ━━━ {%- endcomment -%}
  <footer class="pw-bottom">
    <span class="pw-logo">{{ section.settings.brand_name | upcase }}</span>
    {%- if section.settings.tagline != blank -%}
      <p class="pw-tagline">{{ section.settings.tagline }}</p>
    {%- endif -%}
  </footer>

</div>

{% stylesheet %}
  /* ── Page ── */
  .pw-page {
    min-height: 100svh;
    background: var(--color-black);
    display: flex;
    flex-direction: column;
  }

  /* ── 1. Hero ── */
  .pw-hero {
    position: relative;
    min-height: 100svh;
    display: flex;
    align-items: center;
    justify-content: center;
    overflow: hidden;
  }

  .pw-hero__overlay {
    position: absolute;
    inset: 0;
    background:
      radial-gradient(ellipse at 20% 60%, rgba(74, 92, 42, 0.28) 0%, transparent 55%),
      radial-gradient(ellipse at 80% 20%, rgba(212, 98, 42, 0.14) 0%, transparent 50%),
      linear-gradient(to bottom, rgba(17, 16, 9, 0.45) 0%, rgba(17, 16, 9, 0.80) 100%);
  }

  .pw-hero__grid {
    position: absolute;
    inset: 0;
    background-image:
      linear-gradient(rgba(74, 92, 42, 0.07) 1px, transparent 1px),
      linear-gradient(90deg, rgba(74, 92, 42, 0.07) 1px, transparent 1px);
    background-size: 60px 60px;
    animation: pw-grid-pulse 7s ease-in-out infinite;
  }

  @keyframes pw-grid-pulse {
    0%, 100% { opacity: 0.4; }
    50%       { opacity: 1; }
  }

  .pw-hero__content {
    position: relative;
    z-index: 2;
    text-align: center;
    padding: 0 clamp(24px, 6vw, 100px);
    max-width: 900px;
    width: 100%;
  }

  .pw-eyebrow {
    font-family: var(--font-label);
    font-size: 12px;
    font-weight: 500;
    letter-spacing: 5px;
    text-transform: uppercase;
    color: var(--color-orange);
    margin: 0 0 1.75rem;
  }

  .pw-headline {
    font-family: var(--font-heading);
    font-size: clamp(52px, 9vw, 128px);
    line-height: 0.93;
    letter-spacing: -1px;
    text-transform: uppercase;
    color: var(--color-white);
    margin: 0 0 2rem;
  }

  .pw-subheadline {
    font-family: var(--font-body);
    font-size: clamp(16px, 2vw, 20px);
    font-weight: 300;
    line-height: 1.65;
    color: var(--color-tan-light);
    max-width: 540px;
    margin: 0 auto;
  }

  /* ── 2. Explainer ── */
  .pw-explainer {
    padding: 72px clamp(24px, 6vw, 100px);
    border-top: 1px solid rgba(200, 169, 110, 0.18);
    border-bottom: 1px solid rgba(200, 169, 110, 0.18);
  }

  .pw-explainer__inner {
    max-width: 640px;
    margin: 0 auto;
  }

  .pw-features {
    list-style: none;
    margin: 0;
    padding: 0;
    display: flex;
    flex-direction: column;
    gap: 22px;
  }

  .pw-feature {
    font-family: var(--font-label);
    font-size: 13px;
    font-weight: 500;
    letter-spacing: 3px;
    text-transform: uppercase;
    color: var(--color-tan-light);
    display: flex;
    align-items: center;
    gap: 18px;
  }

  .pw-feature__diamond {
    display: inline-block;
    flex-shrink: 0;
    width: 8px;
    height: 8px;
    background-color: var(--color-orange);
    clip-path: polygon(50% 0%, 100% 50%, 50% 100%, 0% 50%);
  }

  /* ── 3. Capture ── */
  .pw-capture {
    padding: 72px clamp(24px, 6vw, 100px);
    flex: 1;
  }

  .pw-capture__inner {
    max-width: 600px;
    width: 100%;
    margin: 0 auto;
  }

  .pw-form__row {
    display: flex;
    gap: 0;
    width: 100%;
  }

  .pw-form__input {
    flex: 1;
    padding: 16px 22px;
    background: rgba(17, 16, 9, 0.8);
    border: 1px solid rgba(200, 169, 110, 0.45);
    border-right: none;
    color: var(--color-white);
    font-family: var(--font-body);
    font-size: 15px;
    outline: none;
    min-width: 0;
    border-radius: 0;
    transition: border-color 0.2s ease, background 0.2s ease;
  }

  .pw-form__input::placeholder {
    color: rgba(232, 213, 176, 0.4);
  }

  .pw-form__input:focus {
    border-color: var(--color-tan);
    background: rgba(17, 16, 9, 0.95);
  }

  .pw-form__btn {
    flex-shrink: 0;
    background: var(--color-orange);
    color: var(--color-white);
    font-family: var(--font-label);
    font-size: 12px;
    font-weight: 700;
    letter-spacing: 3px;
    text-transform: uppercase;
    padding: 16px 32px;
    border: none;
    cursor: pointer;
    border-radius: 0;
    white-space: nowrap;
    transition: background 0.2s ease, color 0.2s ease;
  }

  .pw-form__btn:hover {
    background: var(--color-tan);
    color: var(--color-black);
  }

  .pw-success {
    font-family: var(--font-label);
    font-size: 13px;
    letter-spacing: 3px;
    text-transform: uppercase;
    color: var(--color-tan);
    padding: 20px 24px;
    border: 1px solid rgba(200, 169, 110, 0.4);
    text-align: center;
    margin: 0;
  }

  .pw-form__note {
    font-family: var(--font-body);
    font-size: 12px;
    color: rgba(232, 213, 176, 0.38);
    margin: 12px 0 0;
    text-align: center;
    line-height: 1.5;
  }

  /* ── 4. Store access toggle ── */
  .pw-access {
    padding: 0 clamp(24px, 6vw, 100px) 48px;
    max-width: calc(600px + clamp(24px, 6vw, 100px) * 2);
  }

  .pw-access__toggle {
    background: none;
    border: none;
    color: rgba(200, 169, 110, 0.45);
    font-family: var(--font-label);
    font-size: 11px;
    letter-spacing: 3px;
    text-transform: uppercase;
    cursor: pointer;
    display: flex;
    align-items: center;
    gap: 8px;
    padding: 0;
    transition: color 0.2s ease;
  }

  .pw-access__toggle:hover {
    color: var(--color-tan);
  }

  .pw-access__chevron {
    display: inline-block;
    width: 0;
    height: 0;
    border-left: 4px solid transparent;
    border-right: 4px solid transparent;
    border-top: 5px solid currentColor;
    transition: transform 0.25s ease;
  }

  .pw-access__toggle[aria-expanded="true"] .pw-access__chevron {
    transform: rotate(180deg);
  }

  .pw-access__form {
    margin-top: 16px;
    max-width: 600px;
  }

  .pw-access__form[hidden] {
    display: none;
  }

  .pw-access__error {
    color: var(--color-orange);
    font-family: var(--font-label);
    font-size: 12px;
    letter-spacing: 1px;
    margin-bottom: 12px;
  }

  /* ── 5. Bottom ── */
  .pw-bottom {
    padding: 40px clamp(24px, 6vw, 100px);
    text-align: center;
    border-top: 1px solid rgba(200, 169, 110, 0.12);
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 8px;
  }

  .pw-logo {
    font-family: var(--font-heading);
    font-size: 26px;
    letter-spacing: 4px;
    color: var(--color-tan);
    text-transform: uppercase;
  }

  .pw-tagline {
    font-family: var(--font-label);
    font-size: 11px;
    letter-spacing: 4px;
    text-transform: uppercase;
    color: rgba(200, 169, 110, 0.3);
    margin: 0;
  }

  /* ── Utility ── */
  .visually-hidden {
    position: absolute;
    width: 1px;
    height: 1px;
    padding: 0;
    margin: -1px;
    overflow: hidden;
    clip: rect(0, 0, 0, 0);
    white-space: nowrap;
    border: 0;
  }

  /* ── Mobile ── */
  @media (max-width: 768px) {
    .pw-headline {
      font-size: clamp(40px, 13vw, 72px);
    }

    .pw-explainer,
    .pw-capture {
      padding: 56px clamp(24px, 5vw, 40px);
    }

    .pw-form__row {
      flex-direction: column;
    }

    .pw-form__input {
      border-right: 1px solid rgba(200, 169, 110, 0.45);
      border-bottom: none;
    }

    .pw-form__btn {
      width: 100%;
    }
  }
{% endstylesheet %}

{% javascript %}
  (function () {
    var toggle = document.querySelector('.pw-access__toggle');
    var form   = document.getElementById('pw-access-form');
    if (!toggle || !form) return;

    toggle.addEventListener('click', function () {
      var expanded = toggle.getAttribute('aria-expanded') === 'true';
      toggle.setAttribute('aria-expanded', String(!expanded));
      if (expanded) {
        form.hidden = true;
      } else {
        form.hidden = false;
        form.querySelector('input[type="password"]').focus();
      }
    });
  })();
{% endjavascript %}

{% schema %}
{
  "name": "Password page",
  "settings": [
    {
      "type": "header",
      "content": "Hero"
    },
    {
      "type": "text",
      "id": "eyebrow",
      "label": "Eyebrow text",
      "default": "Ruck On"
    },
    {
      "type": "text",
      "id": "heading",
      "label": "Headline",
      "default": "Something is coming"
    },
    {
      "type": "textarea",
      "id": "subheading",
      "label": "Subheadline",
      "default": "We're still building. Be the first to know when we launch."
    },
    {
      "type": "header",
      "content": "What we're building"
    },
    {
      "type": "text",
      "id": "feature_1",
      "label": "Feature line 1",
      "default": "Monthly custom patches — designed for those who ruck"
    },
    {
      "type": "text",
      "id": "feature_2",
      "label": "Feature line 2",
      "default": "Build or join a rucking community — find your unit"
    },
    {
      "type": "text",
      "id": "feature_3",
      "label": "Feature line 3",
      "default": "Exclusive patches shipped to your door every month"
    },
    {
      "type": "header",
      "content": "Email capture"
    },
    {
      "type": "text",
      "id": "input_placeholder",
      "label": "Input placeholder",
      "default": "Enter your email"
    },
    {
      "type": "text",
      "id": "button_text",
      "label": "Button label",
      "default": "Notify me"
    },
    {
      "type": "text",
      "id": "success_message",
      "label": "Success message",
      "default": "You're on the list. We'll be in touch."
    },
    {
      "type": "text",
      "id": "form_note",
      "label": "Form note (optional)",
      "default": "No spam. Unsubscribe anytime."
    },
    {
      "type": "header",
      "content": "Store access"
    },
    {
      "type": "text",
      "id": "password_toggle_label",
      "label": "Password toggle label",
      "default": "Have a password? Enter here"
    },
    {
      "type": "text",
      "id": "password_label",
      "label": "Password field label",
      "default": "Password"
    },
    {
      "type": "text",
      "id": "password_placeholder",
      "label": "Password placeholder",
      "default": "Enter password"
    },
    {
      "type": "text",
      "id": "password_button",
      "label": "Password button text",
      "default": "Enter"
    },
    {
      "type": "header",
      "content": "Bottom"
    },
    {
      "type": "text",
      "id": "brand_name",
      "label": "Brand name",
      "default": "Ruck On"
    },
    {
      "type": "text",
      "id": "tagline",
      "label": "Tagline",
      "default": "Carry the weight"
    }
  ]
}
{% endschema %}
